# 16.3. Migration

Canonical documentation for [16.3. Migration](2. Data Engineering & Pipelines/16. Real-World Scenarios/16.3. Migration.md). This document defines concepts, terminology, and standard usage.

## Purpose
Migration addresses the necessity of transitioning digital assets—including data, software logic, and infrastructure configurations—from a source environment to a target environment. This process is fundamental to the evolution of systems, allowing for modernization, scalability, cost optimization, and the remediation of technical debt. It ensures that as technology stacks and business requirements change, the underlying state and functionality of a system remain coherent, accessible, and performant.

> [!NOTE]
> This documentation is intended to be implementation-agnostic and authoritative, focusing on the architectural and procedural principles of migration rather than specific toolsets.

## Scope
The scope of migration encompasses the movement and transformation of stateful and stateless components across different environments or versions.

> [!IMPORTANT]
> **In scope:**
> * **Data Migration:** Moving information between storage types, formats, or database schemas.
> * **Application Migration:** Transitioning software logic between platforms or architectural patterns (e.g., monolithic to microservices).
> * **Infrastructure Migration:** Moving workloads between physical servers, virtualized environments, or cloud providers.
> * **Schema Evolution:** The systematic versioning of data structures to support application updates.

> [!WARNING]
> **Out of scope:**
> * Specific vendor implementations or proprietary CLI commands.
> * Routine maintenance tasks that do not involve a change in environment or structure.
> * Real-time data streaming that does not result in a permanent change of state location.

## Definitions
Provide precise definitions for key terms.

| Term | Definition |
|------|------------|
| **Source** | The original environment, format, or system from which assets are being moved. |
| **Target** | The destination environment, format, or system receiving the assets. |
| **Cutover** | The specific point in time when the system of record switches from the source to the target. |
| **Idempotency** | The property of a migration script or process where it can be applied multiple times without changing the result beyond the initial application. |
| **Rollback** | The procedure used to revert the system to its original state in the event of a migration failure. |
| **Data Gravity** | The concept that data and applications are attracted to each other; as data sets grow, they become harder to move. |
| **ETL** | Extract, Transform, Load; the three-step process often used in data-heavy migrations. |

## Core Concepts
Migration is governed by the management of state and the preservation of integrity during transition.

*   **State Consistency:** Ensuring that no data is lost or corrupted during the transition.
*   **Minimal Downtime:** The objective of maintaining system availability while the migration is in progress.
*   **Validation:** The rigorous testing of the target environment to ensure it matches the expected outcome of the source.

> [!TIP]
> Think of migration like moving a library to a new building. You don't just move the books; you must ensure the shelving system (schema) is ready, the index (metadata) is updated, and the patrons (users) know which door to enter on opening day.

## Standard Model
The standard model for migration follows a non-linear lifecycle designed to minimize risk:

1.  **Discovery and Assessment:** Identifying all assets, dependencies, and potential constraints within the source environment.
2.  **Planning and Design:** Defining the target architecture, choosing the migration pattern, and establishing success criteria.
3.  **Execution (Pilot):** Performing a small-scale migration to test the process and identify unforeseen issues.
4.  **Execution (Bulk):** The full-scale movement of assets from source to target.
5.  **Validation:** Verifying data integrity and functional parity in the target environment.
6.  **Cutover:** Redirecting traffic or users to the target system.
7.  **Decommissioning:** Safely retiring the source environment after a successful observation period.

## Common Patterns
*   **Big Bang Migration:** The entire system is migrated in a single window of time. This usually requires scheduled downtime but is simpler to execute.
*   **Phased (Trickle) Migration:** Assets are moved in increments. This reduces risk and allows for continuous operation but increases complexity due to the need for synchronization between source and target.
*   **Parallel Adoption:** Running both the source and target systems simultaneously for a period to ensure the target performs as expected before the source is retired.
*   **Replatforming ("Lift and Reshape"):** Making minor optimizations to the assets during the migration to take advantage of target environment features without changing the core architecture.

## Anti-Patterns
*   **Manual Migration:** Relying on human intervention for data movement or configuration, which introduces high risk of inconsistency and unrepeatable results.
*   **Lack of Rollback Strategy:** Proceeding with a migration without a verified method to return to the "last known good" state.
*   **Ignoring Latency:** Failing to account for the distance and bandwidth constraints between the source and target, leading to "data lag."
*   **Big Bang without Testing:** Attempting a full-scale cutover without prior pilot migrations or dry runs.

> [!CAUTION]
> Avoid tight coupling between the migration logic and the application code. Migration scripts should be decoupled and versioned independently to prevent circular dependencies during deployment.

## Edge Cases
*   **Large-Scale Data (Petabyte Scale):** When data volume exceeds network bandwidth capabilities, requiring physical transport of storage media.
*   **Legacy "Black Box" Systems:** Migrating systems where the source code or schema documentation is lost, requiring reverse engineering or "dark" data discovery.
*   **Circular Dependencies:** Scenarios where System A must migrate before System B, but System B provides the authentication required for System A's migration.
*   **Timezone/Encoding Shifts:** Migrating data across systems with different default character sets or temporal logic, which can lead to silent data corruption.

## Related Topics
*   **16.1. Versioning:** The prerequisite for tracking changes in schemas and application logic.
*   **16.4. Disaster Recovery:** The use of migration principles to restore service after a catastrophic failure.
*   **Data Integrity and Validation:** The mathematical and logical verification of data during movement.
*   **Infrastructure as Code (IaC):** The automation of target environment provisioning.

## Change Log

| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-17 | Initial AI-generated canonical documentation |